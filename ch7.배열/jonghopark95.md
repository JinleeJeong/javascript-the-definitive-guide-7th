# 7장. 배열



## 7.1 배열 생성

### 

- 배열 리터털은 마지막에 콤마를 허용한다. 따라서, [,,] 의 길이는 3이 아니라 2이다.
- 배열에서 중복된 요소를 제거하고 싶을 때 다음과 같은 케이스가 가능하다. `=> [...new Set([1, 2, 3, 1, 2, 3])];`
- Array() 연산자
  - 인자 없이 호출하게 될 경우 배열 리터럴과 동일하다.
  - 인자를 숫자 하나만 넣을 경우 해당 길이를 가진 빈 배열과 동일하다. 
    - 해당 배열은 length 만 가지게 된다. ( new Array(10) => Array(10) (length : 10) )
  - 인자에 숫자가 아닌 요소를 넣거나, 2개 이상인 경우 해당 인자들을 가진 배열과 동일하다.
- Array.of()
  - Array constructor 에 숫자 인자 하나만 넘겨 호출하면 길이가 해당 숫자인 배열이 생성된다.
    - 따라서, 인자가 숫자 하나인 배열은 Array constructor 로 만들 수 없다.
  - Array.of 는 인자의 개수를 따지지 않고 각 인자를 새 배열 요소로 사용한다.

- Array.from()
  - Array.from 은 첫 번째 인자로 이터러블 객체나 유사 배열 객체를 받는다.
  - Array.from(iterable) 은 [...iterable] 과 동일하다.
  - Array.from 의 의의는 유사 배열 객체를 진짜 배열로 바꾸는데 있다.
    - 브라우저 메서드 일부가 유사 배열 객체를 종종 반환하는데, 이를 배열로 바꾸면 효과적이다.
  - Array.from 의 두 번째 인자로 콜백 함수를 전달하면 각 인자를 순회하며 얻은 결과값을 새롭게 배열로 만들어준다.





## 7.2 배열 요소 읽기와 쓰기



## 7.3 성긴 배열



### sparse array

JS 에서 배열은 인덱스를 키 값으로, element 를 value 로 삼는 객체이다.

이 때 콤마를 반복하면 다음과 같은 배열이 만들어진다.

```js
const a = [,2,,3,,4];

// Array(6) [ <1 empty slot>, 2, <1 empty slot>, 3, <1 empty slot>, 4 ]
// 1: 2
// 3: 3
// 5: 4
// length: 6

// => [
//   null,
//   2,
//   null,
//   3,
//   null,
//   4
// ]
```



즉, 비어있는 공간은 프로퍼티가 따로 할당되지 않는다. 대신, length 값이 바뀌게 된다.



따라서 다음과 같은 상황이 생긴다.

```js
const x = [...[,]];
const y = [,];

console.log(0 in x, 0 in y); // => true false
```

x의 경우 Array.from([,]) 이라고 생각했을 때 , Array.from 은 값이 없는 경우 프로퍼티는 할당하지만 값은 undefined 로 할당한다.

따라서, x 는 0 이라는 키와 undefined 라는 value 를 가지게 되므로 true 이다.

y 의 경우 length 만 있는 객체라 생각할 수 있고, 0에 해당하는 프로퍼티가 없으므로 false 이다.





## 7.4 배열 길이

- 만약, 배열의 length 를 현재 요소 수보다 작게 할당하면, bound 를 넘어간 요소들은 전부 삭제한다.



## 7.5 배열 요소 추가와 삭제



## 7.6 배열 순회

- for/of 는 순회하며 sparse array 를 인식하지 못하고 순회하지만, 
  forEach 는 이를 인식하며 존재하지 않는 경우 함수를 호출하지 않는다.



## 7.7 다차원 배열



## 7.8 배열 메서드



### forEach, map, ... 의 인자

- 콜백 함수의 세번째 인자는 배열 자체를 받는데, 가끔 배열 길이가 필요한 경우 이를 객체 분해 할당해서 쓸 수 있다!
- 두 번째 인자로 callbackFn 을 호출할 때 this 를 지정할 수 있다.



### flatMap

- flatMap 은 mapping 중에 어떤 아이템을 추가하거나 제거할 수 있다.
  - 즉, filter 의 반대처럼 동작한다고 생각하면 좋다.



### slice

인자에 음수를 넣으면 해당 값에 배열 길이를 더한 값을 적용한다.



### splice

splice 는 결과값으로 제거된 요소로 이루어진 배열을 반환하고, 타겟이 된 배열에도 수정 사항이 반영된다.



### fill

fill 은 배열 요소들을 지정된 값으로 바꾼다. 해당 메서드로 sparse array 에 값을 할당하면 편리하다.

```js
new Array(10).fill(0)
```



### join

배열의 toString() 은 join() 을 인자 없이 호출하는 것과 동일하다.



## 7.9 배열 비슷한 객체



유사 배열 객체는 Array.prototype 을 상속하지 않으므로 배열 메서드를 직접적으로 호출할 수 없다.

그러나 Function.call 을 통해 간접적으로 호출할수는 있다.

```js
Array.prototype.join.call({'0':'0', '1':'1', '2':'2', length:3}, ','); // => '0,1,2'
```





## 7.10 배열인 문자열



JS 문자열은 UTF-16 으로 구성된 읽기 전용 배열처럼 동작한다.

문자열이 배열처럼 동작하므로, 다음과 같이 배열 메서드도 call 을 통해 사용할 수 있다.

```js
Array.prototype.join.call('abcde',','); // => 'a,b,c,d,e'
```
